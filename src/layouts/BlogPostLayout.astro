---
import BlogLayout from './BlogLayout.astro';
import type { MarkdownLayoutProps } from 'astro';
import '../styles/prose.css';

type Props = MarkdownLayoutProps<{
  title: string;
  date: string;
  author: string;
  image: string;
  tags: string[];
}>;

const { frontmatter } = Astro.props;

const formatDate = (date: string) => {
  return new Date(date).toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });
};
---

<BlogLayout title={frontmatter.title}>
  <article class="container mx-auto px-8 py-16">
    <div class="max-w-3xl mx-auto">
      <!-- Header -->
      <header class="space-y-16">
        <div class="aspect-video">
          <img
            src={frontmatter.image}
            alt={frontmatter.title}
            class="w-full h-full object-cover rounded-lg"
          />
        </div>
        
        <div class="space-y-6">
          <div class="flex items-center gap-4 text-text-secondary">
            <time datetime={frontmatter.date} class="text-fluid-sm">
              {formatDate(frontmatter.date)}
            </time>
            <span class="w-1 h-1 rounded-full bg-accent"></span>
            <span class="text-fluid-sm">{frontmatter.author}</span>
          </div>
          
          <h1 class="text-fluid-2xl md:text-fluid-xl font-medium text-text-primary">{frontmatter.title}</h1>
          
          <div class="flex flex-wrap gap-2">
            {frontmatter.tags.map(tag => (
              <span class="px-3 py-1 text-fluid-sm rounded-full bg-accent/10 text-accent">
                {tag}
              </span>
            ))}
          </div>
        </div>
      </header>

      <!-- Content -->
      <div class="prose-custom mt-16">
        <slot />
      </div>

      <!-- Navigation -->
      <div class="mt-16 pt-8 border-t border-white/10">
        <a 
          href="/blog"
          class="group inline-flex items-center gap-2 text-accent hover:underline"
        >
          <svg class="w-4 h-4 transition-transform group-hover:-translate-x-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
          </svg>
          <span class="text-fluid-sm">Back to Blog</span>
        </a>
      </div>
    </div>
  </article>
</BlogLayout>